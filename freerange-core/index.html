
<!DOCTYPE html>
<html>
    <head>
        <!-- <script src="./dist/index.js"></script> -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/freerange@0.0.23"></script> -->
    </head>
    <body>  
        <button>Save Test Files</button>
    </body>
    <script type="module">
        // import * as freerange from 'https://cdn.jsdelivr.net/npm/freerange@0.0.23/dist/index.esm.js'
        import * as freerange from './dist/index.esm.js'
        const manager = new freerange.FileManager()

        document.querySelector('button').onclick = async () => {
            await manager.mount()
            const text = await manager.open('test.txt')

            // If Remote Filesystem Was Used...We Can't Create Files (yet)
            if (text){
                const textContents = await text.body
                console.log('Existing Text', textContents)
                text.body = 'Hello world'
            }


            const json = await manager.open('test.json')
            if (json){
                const jsonContents = await json.body
                console.log('Existing JSON', jsonContents)
                json.body = {key: 'value'}
            }

            const csv = await manager.open('test.csv')
            if (csv){
                const csvContents = await csv.body
                console.log('Existing CSV', csvContents)
                csvContents.push({row: csvContents.length})
            }

            await manager.save()
        }

    </script>
</html>
        